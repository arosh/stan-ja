## 40. 実数値の基本関数

この章ではゼロ以上の実数値や整数値を引数とし，実数値を返す組み込み関数について記述しています。

### 40.1 実数値の関数のベクトル化

この章の中にリスト化されていますが，多くのStan組み込み関数はベクトル化されていますから，あらゆる引数のタイプに適用できます。これらの関数のベクトル化された形式は，要素それぞれに関数を繰り返し適用するように明示的にループを書いたものより速くなるわけではありません。単に読み書きしやすく，エラーを減らすためのものです。

#### 単一関数のベクトル化

Stanの単一関数のほとんどは，どの型の引数であっても適用できます。例えば指数関数である`exp`は，実数を引数にしてもいいですし，実数の配列を引数にすることもできます。整数の引数以外であっても，結果の型は，引数の型と同じで次元性やサイズを含んだものになります。整数の引数はまず実数値に昇格されますが，結果は引数と同じ型で次元性や最右を持ったものになります。

##### 実数値と実数配列の引数

単一の実数値に適用した時，結果は実数値になります。実数値の配列に適用した時，ベクトル化された関数は`exp()`のようになり，要素単位で定義されます。例えば，

```
// 変数を引数のために宣言する
real x0;
real x1[5];
real x2[4, 7];
...
// 変数を結果のために宣言する
real y0;
real y1[5];
real y2[4, 7];
...
// 計算と値の割り当て
y0 = exp(x0);
y1 = exp(x1);
y2 = exp(x2);
```

`exp`が配列に適用されると，要素ごとに適用されることになります。上の文の例では，

```
y2 = exp(x2);
```

という式は`y2`を明示的なループで記述した

```
for ( i in 1:4)
 for( j in 1:7)
  y2[i, j] = exp(x2[i, y]);
```

と同じ結果を返します。

##### ベクトルと行列の引数

ベクトル化された関数は，ベクトルや行列の各要素にも適用できます。例えば，次のようになります。

```
vector[5] xv;
row_vector[7] xrv;
matrix[10, 20] xm;
...
vector[5] yv;
row_vector[7] yrv;
matrix[10, 20] ym;
...
yv = exp(xv);
yrv = exp(xrv);
ym = exp(xm);
```

ベクトルや行列の配列にも同じように働きます。例えば，

```
matrix[17, 93] u[12];
...
matrix[18, 93] z[12];
...
z = exp(u);
```

これが実行された後は，`z[i, j, k]`は`exp(u[i, j, k])`と同じになります。


